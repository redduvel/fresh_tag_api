# Flask API с интеграцией Supabase

Серверное приложение для обслуживания системы FreshTag

## Структура проекта

```
├── app.py              # Основной файл приложения
├── requirements.txt    # Зависимости проекта
├── .env                # Переменные окружения
├── api/                # Директория с модулями API
│   ├── __init__.py     # Инициализация пакета API
│   ├── supabase_client.py  # Клиент для работы с Supabase
│   ├── auth/           # Модуль аутентификации
│   │   ├── __init__.py
│   │   └── auth.py     # Маршруты аутентификации
│   └── server/         # Модуль сервера
│       ├── __init__.py
│       └── server.py   # Маршруты состояния сервера
└── venv/               # Виртуальное окружение Python
```

## Настройка окружения

1. Создание виртуального окружения:
```
python3 -m venv venv
```

2. Активация виртуального окружения:

Для Linux/macOS:
```
source venv/bin/activate
```

Для Windows:
```
venv\Scripts\activate
```

3. Установка зависимостей:
```
pip install -r requirements.txt
```

4. Настройка переменных окружения:
   - В файле `.env` уже настроены параметры для подключения к Supabase
   - При необходимости измените данные параметры на ваши

## Запуск сервера

Через Flask:
```
flask run
```

Или напрямую через Python:
```
python app.py
```

По умолчанию сервер запускается по адресу: http://127.0.0.1:5000

## Доступные эндпоинты

### Статус сервера
- `GET /api/server/status` - Возвращает информацию о состоянии сервера:
  - Статус "online"
  - Текущее время
  - Статус подключения к Supabase

### Аутентификация
- `POST /api/auth/invite` - Отправляет приглашение пользователю по электронной почте
  - Требуется JSON-тело запроса с полем "email"

## Разработка

Проект организован по модульному принципу с использованием Blueprint:

1. Для добавления новых маршрутов аутентификации, расширяйте `api/auth/auth.py`
2. Для добавления новых маршрутов сервера, расширяйте `api/server/server.py`
3. Или создайте свой собственный Blueprint для новой функциональности

## Особенности реализации

- Для работы с Supabase используется паттерн Singleton (см. `api/supabase_client.py`)
- Обработка ошибок подключения к Supabase включена в маршрут статуса сервера
- Организация кода следует принципам модульной архитектуры 